Version 4
SHEET 1 3376 1836
WIRE 160 -240 160 -272
WIRE 160 -128 160 -160
WIRE -32 -112 -32 -160
WIRE -32 -112 -160 -112
WIRE -160 -80 -160 -112
WIRE -160 16 -160 0
WIRE -160 16 -192 16
WIRE -160 32 -160 16
WIRE -32 32 -32 -112
WIRE -1792 96 -1824 96
WIRE -1648 96 -1712 96
WIRE -160 144 -160 112
WIRE -32 144 -32 112
WIRE -1456 192 -1488 192
WIRE -1344 192 -1376 192
WIRE -1312 192 -1344 192
WIRE -1200 192 -1232 192
WIRE -1792 208 -1824 208
WIRE -1648 208 -1648 96
WIRE -1648 208 -1712 208
WIRE -1552 208 -1648 208
WIRE -1792 320 -1824 320
WIRE -1648 320 -1648 208
WIRE -1648 320 -1712 320
WIRE -1344 336 -1344 192
WIRE -1312 336 -1344 336
WIRE -800 336 -832 336
WIRE -1216 352 -1248 352
WIRE -1312 368 -1344 368
WIRE -1488 496 -1520 496
WIRE -1344 496 -1344 368
WIRE -1344 496 -1408 496
WIRE -1312 496 -1344 496
WIRE -1200 496 -1232 496
WIRE 656 528 624 528
WIRE 512 544 480 544
WIRE -1488 608 -1520 608
WIRE -1344 608 -1344 496
WIRE -1344 608 -1408 608
WIRE -1312 608 -1344 608
WIRE -1200 608 -1232 608
WIRE 656 736 624 736
WIRE 512 752 480 752
WIRE -896 848 -896 816
WIRE -704 896 -832 896
WIRE 448 944 304 944
WIRE -832 960 -832 896
WIRE -800 960 -832 960
WIRE -704 976 -704 896
WIRE -704 976 -736 976
WIRE -672 976 -704 976
WIRE -896 992 -896 928
WIRE -800 992 -896 992
WIRE -896 1024 -896 992
WIRE 304 1024 304 944
WIRE 352 1024 304 1024
WIRE 448 1040 448 944
WIRE 448 1040 416 1040
WIRE 352 1056 304 1056
WIRE -896 1136 -896 1088
WIRE 352 1200 320 1200
WIRE 464 1200 432 1200
WIRE -832 1296 -864 1296
WIRE -720 1296 -768 1296
WIRE -528 1312 -560 1312
WIRE -416 1312 -464 1312
WIRE 208 1312 176 1312
WIRE 320 1312 320 1200
WIRE 320 1312 288 1312
WIRE 352 1312 320 1312
WIRE 464 1328 464 1200
WIRE 464 1328 416 1328
WIRE 640 1328 640 1040
WIRE 640 1328 464 1328
WIRE 352 1344 320 1344
WIRE 320 1376 320 1344
WIRE 640 1376 640 1328
WIRE 896 1392 784 1392
WIRE -976 1424 -1024 1424
WIRE -864 1424 -864 1296
WIRE -864 1424 -896 1424
WIRE -832 1424 -864 1424
WIRE -720 1440 -720 1296
WIRE -720 1440 -768 1440
WIRE -672 1440 -720 1440
WIRE -560 1440 -560 1312
WIRE -560 1440 -592 1440
WIRE -528 1440 -560 1440
WIRE -832 1456 -864 1456
WIRE -416 1456 -416 1312
WIRE -416 1456 -464 1456
WIRE -368 1456 -416 1456
WIRE 784 1456 784 1392
WIRE 816 1456 784 1456
WIRE -528 1472 -560 1472
WIRE 896 1472 896 1392
WIRE 896 1472 880 1472
WIRE 976 1472 896 1472
WIRE -864 1488 -864 1456
WIRE 640 1488 640 1456
WIRE 816 1488 640 1488
WIRE -560 1504 -560 1472
WIRE 640 1504 640 1488
WIRE 640 1616 640 1584
FLAG -896 1136 0
FLAG -896 816 XORout
FLAG -768 944 Vcc
FLAG -768 1008 0
FLAG -1216 352 XORout
FLAG 160 192 0
FLAG 160 -272 SignalIn
FLAG 304 1056 LowPassOut
FLAG 976 1472 SignalOut
FLAG 384 1008 Vcc
FLAG 384 1072 0
FLAG 480 752 SignalOut
FLAG 480 544 SignalIn
FLAG 656 528 VcoOut1
FLAG 656 736 VcoOut2
FLAG -1520 224 0
FLAG -1280 384 0
FLAG -1280 320 Vcc
FLAG -1520 160 Vcc
FLAG -1552 176 Ref2
FLAG -1200 192 Vcc
FLAG -1824 208 VcoOut1
FLAG -1824 320 VcoOut2
FLAG -1824 96 0
FLAG -1520 496 VcoOut1
FLAG -1520 608 VcoOut2
FLAG -1200 496 0
FLAG -1200 608 Vcc
FLAG 848 1440 Vcc
FLAG 848 1504 0
FLAG 640 1616 0
FLAG -32 144 0
FLAG -32 -160 Vcc
FLAG -800 1408 Vcc
FLAG -800 1472 0
FLAG -368 1456 LowPassOut
FLAG -192 16 Ref2
FLAG -160 144 0
FLAG -896 320 Ref2
FLAG -864 368 0
FLAG -864 304 Vcc
FLAG -864 1488 Ref2
FLAG 320 1376 Ref2
FLAG 384 1360 0
FLAG 384 1296 Vcc
FLAG 176 1312 LowPassOut
FLAG -1024 1424 XORout
FLAG -496 1424 Vcc
FLAG -496 1488 0
FLAG -560 1504 Ref2
SYMBOL res -880 944 R180
WINDOW 0 36 76 Invisible 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value {Rf}
SYMBOL cap -880 1088 R180
WINDOW 0 24 56 Invisible 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C1
SYMATTR Value {Cf}
SYMBOL voltage 160 -256 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -157 57 Left 2
WINDOW 3 -78 108 Invisible 2
SYMATTR InstName VsignalIn1
SYMATTR Value PULSE(0 0.5 {2*Ts} 100u 100u {0.9*Ts} {2*Ts} 5)
SYMBOL voltage 160 16 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -157 57 Left 2
WINDOW 3 -78 108 Invisible 2
SYMATTR InstName VsignalIn2
SYMATTR Value PULSE(0 0.5 {17*Ts} 100u 100u {0.9*Ts} {1*Ts} 1)
SYMBOL voltage 160 96 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -181 58 Left 2
WINDOW 3 -78 108 Invisible 2
SYMATTR InstName VsignalLow1
SYMATTR Value 0.25V
SYMBOL voltage 160 -144 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -157 57 Left 2
WINDOW 3 -78 108 Invisible 2
SYMATTR InstName VsignalIn3
SYMATTR Value PULSE(0 0.5 {13*Ts} 100u 100u {0.9*Ts} {1*Ts} 1)
SYMBOL voltage 160 -64 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -157 57 Left 2
WINDOW 3 -78 108 Invisible 2
SYMATTR InstName VsignalIn4
SYMATTR Value PULSE(0 0.5 {14*Ts} 100u 100u {0.9*Ts} {2*Ts} 1)
SYMBOL VCO_comp 560 544 R0
SYMATTR InstName VCO1
SYMATTR SpiceLine fo={fo} k={k} Vcc={Vcc}
SYMBOL VCO_comp 560 752 R0
SYMATTR InstName VCO2
SYMATTR SpiceLine fo={fo} k={k} Vcc={Vcc}
SYMBOL OpAmps\\UniversalOpAmp2 -768 976 R0
SYMATTR InstName U1
SYMBOL OpAmps\\UniversalOpAmp2 384 1040 R0
SYMATTR InstName U4
SYMBOL OpAmps\\UniversalOpAmp2 -1280 352 R0
SYMATTR InstName U5
SYMATTR Value2 Avol=1Meg GBW=10Meg Slew={Sl}
SYMBOL OpAmps\\UniversalOpAmp2 -1520 192 R0
SYMATTR InstName U6
SYMATTR Value2 Avol=1Meg GBW=10Meg Slew={Sl}
SYMBOL res -1696 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value {R}
SYMBOL res -1696 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {R}
SYMBOL res -1360 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value {R}
SYMBOL res -1216 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value {2*R}
SYMBOL res -1696 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value {R}
SYMBOL res -1392 480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value {R}
SYMBOL res -1392 592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value {R}
SYMBOL res -1216 480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value {R}
SYMBOL res -1216 592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value {R}
SYMBOL OpAmps\\UniversalOpAmp2 848 1472 R0
SYMATTR InstName U8
SYMBOL res 624 1360 R0
SYMATTR InstName R20
SYMATTR Value {11*R}
SYMBOL res 624 1488 R0
SYMATTR InstName R21
SYMATTR Value {R}
SYMBOL voltage -32 16 R0
SYMATTR InstName V1
SYMATTR Value {Vcc}
SYMBOL res -992 1440 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R2
SYMATTR Value {Rf}
SYMBOL cap -832 1312 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C2
SYMATTR Value {Cf}
SYMBOL OpAmps\\UniversalOpAmp2 -800 1440 R0
SYMATTR InstName U2
SYMBOL OpAmps\\UniversalOpAmp2 -864 336 R0
SYMATTR InstName U3
SYMATTR Value2 Avol=1Meg GBW=10Meg Slew={Sl}
SYMBOL res -176 -96 R0
SYMATTR InstName R3
SYMATTR Value {R}
SYMBOL res -176 16 R0
SYMATTR InstName R4
SYMATTR Value {R}
SYMBOL OpAmps\\UniversalOpAmp2 384 1328 R0
SYMATTR InstName U7
SYMATTR Value2 Avol=1Meg GBW=10Meg Slew={Sl}
SYMBOL res 304 1296 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {R}
SYMBOL res 448 1184 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {R}
SYMBOL res -688 1456 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value {Rf}
SYMBOL cap -528 1328 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C3
SYMATTR Value {Cf}
SYMBOL OpAmps\\UniversalOpAmp2 -496 1456 R0
SYMATTR InstName U9
TEXT -640 -144 Left 2 !.tran {20*Ts} startup uic
TEXT -768 664 Right 2 ;Low pass filter
TEXT 376 440 Left 2 ;Reference VCO frequency generator
TEXT 352 656 Left 2 ;Feedback VCO frequency generator
TEXT -800 848 Left 2 ;Buffer
TEXT 328 896 Left 2 ;Buffer
TEXT -640 -96 Left 2 !.param fo=10k k=500 Vcc=12
TEXT -1472 -40 Left 2 ;XOR gate
TEXT -640 64 Left 2 !.param R=10k
TEXT -640 -16 Left 2 !.param Cf=10n Rf=f3dB/Cf/fo
TEXT 832 1312 Left 2 ;Buffer
TEXT -640 32 Left 2 !.param Sl=500Meg
TEXT -640 96 Left 2 !.param fs = 100 Ts=1/fs
TEXT -640 -48 Left 2 !.param f3dB=fo/1000
TEXT -848 1216 Left 2 ;Integrator filter
TEXT -544 1232 Left 2 ;Integrator filter
