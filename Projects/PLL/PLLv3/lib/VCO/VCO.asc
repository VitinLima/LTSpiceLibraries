Version 4
SHEET 1 1408 1428
WIRE 624 -176 624 -224
WIRE -624 -32 -656 -32
WIRE -512 -32 -544 -32
WIRE -496 -32 -512 -32
WIRE -320 -32 -432 -32
WIRE 624 -32 624 -96
WIRE 672 -32 624 -32
WIRE 800 -32 752 -32
WIRE -512 64 -512 -32
WIRE -512 64 -736 64
WIRE -448 64 -512 64
WIRE -320 80 -320 -32
WIRE -320 80 -384 80
WIRE 624 80 624 -32
WIRE 624 80 560 80
WIRE 672 80 624 80
WIRE 816 80 752 80
WIRE -448 96 -576 96
WIRE -320 112 -320 80
WIRE -112 112 -320 112
WIRE 48 128 -48 128
WIRE -784 144 -848 144
WIRE -112 144 -176 144
WIRE 48 176 48 128
WIRE -736 208 -736 160
WIRE 624 224 624 80
WIRE 672 224 624 224
WIRE 816 240 736 240
WIRE 1200 240 816 240
WIRE 48 256 48 240
WIRE 128 256 48 256
WIRE 256 256 192 256
WIRE 672 256 624 256
WIRE 1312 256 1264 256
WIRE 48 272 48 256
WIRE 1200 272 1184 272
WIRE -688 320 -720 320
WIRE -576 320 -576 96
WIRE -576 320 -608 320
WIRE -544 320 -576 320
WIRE -432 320 -464 320
WIRE -1264 352 -1264 320
WIRE -1024 352 -1184 352
WIRE -256 352 -256 320
WIRE 624 352 624 256
WIRE 624 352 560 352
WIRE 656 352 624 352
WIRE 816 352 816 240
WIRE 816 352 736 352
WIRE 864 352 816 352
WIRE 1072 352 1040 352
WIRE 1184 352 1184 272
WIRE 1184 352 1152 352
WIRE 1216 352 1184 352
WIRE 1328 352 1296 352
WIRE 48 368 48 352
WIRE -1184 416 -1184 352
WIRE -1120 416 -1184 416
WIRE 624 416 624 352
WIRE 656 416 624 416
WIRE 768 416 736 416
WIRE -1024 432 -1024 352
WIRE -1024 432 -1056 432
WIRE -976 432 -1024 432
WIRE -1264 448 -1264 432
WIRE -1120 448 -1264 448
WIRE 624 448 624 416
WIRE -256 464 -256 432
WIRE -176 464 -176 144
WIRE -176 464 -256 464
WIRE -1264 496 -1264 448
WIRE -256 496 -256 464
WIRE 624 560 624 528
WIRE -256 608 -256 576
WIRE -1264 624 -1264 576
WIRE -608 768 -640 768
WIRE -496 768 -528 768
WIRE -480 768 -496 768
WIRE -304 768 -416 768
WIRE -496 864 -496 768
WIRE -496 864 -720 864
WIRE -432 864 -496 864
WIRE -304 880 -304 768
WIRE -304 880 -368 880
WIRE -432 896 -560 896
WIRE -304 912 -304 880
WIRE -96 912 -304 912
WIRE 112 928 -32 928
WIRE -768 944 -832 944
WIRE -96 944 -160 944
WIRE 112 992 112 928
WIRE -720 1008 -720 960
WIRE 112 1088 112 1056
WIRE 208 1088 112 1088
WIRE 368 1088 272 1088
WIRE 112 1104 112 1088
WIRE -672 1120 -704 1120
WIRE -560 1120 -560 896
WIRE -560 1120 -592 1120
WIRE -528 1120 -560 1120
WIRE -416 1120 -448 1120
WIRE -240 1152 -240 1120
WIRE 112 1200 112 1184
WIRE -240 1264 -240 1232
WIRE -160 1264 -160 944
WIRE -160 1264 -240 1264
WIRE -240 1296 -240 1264
WIRE -240 1408 -240 1376
FLAG -720 320 Vcc
FLAG 704 208 Vcc
FLAG 704 272 0
FLAG -432 320 0
FLAG -656 -32 ref
FLAG -976 -208 Vcc
FLAG -976 -128 0
FLAG 624 560 0
FLAG 768 416 Vcc
FLAG -416 112 0
FLAG -416 48 Vcc
FLAG 1232 224 Vcc
FLAG 1232 288 0
FLAG 1040 352 Vcc
FLAG 1328 352 0
FLAG 864 352 Nout
IOPIN 864 352 Out
FLAG 624 -224 0
FLAG 800 -32 Vcc
FLAG 560 352 PulseL
FLAG 560 80 PulseH
FLAG -80 96 Vcc
FLAG -80 160 0
FLAG -256 320 Vcc
FLAG -256 608 0
FLAG 256 256 PulseH
FLAG -848 144 out
FLAG -736 208 0
FLAG -704 1120 Vcc
FLAG -416 1120 0
FLAG -640 768 ref
FLAG -400 912 0
FLAG -400 848 Vcc
FLAG -64 896 Vcc
FLAG -64 960 0
FLAG -240 1120 Vcc
FLAG -240 1408 0
FLAG 368 1088 PulseL
FLAG -832 944 Nout
FLAG -720 1008 0
FLAG 48 368 0
FLAG 112 1200 0
FLAG 816 80 out
FLAG -976 432 ref
FLAG -1088 464 0
FLAG -1088 400 Vcc
FLAG -1264 624 Vin
IOPIN -1264 624 In
FLAG -1264 320 Vcc
FLAG 1312 256 out
IOPIN 1312 256 Out
SYMBOL res -592 304 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 5k
SYMBOL res -448 304 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 5k
SYMBOL res -528 -48 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {R}
SYMBOL cap -496 -16 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C1
SYMATTR Value {C}
SYMBOL voltage -976 -224 R0
SYMATTR InstName V1
SYMATTR Value {Vcc}
SYMBOL res 752 400 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 5k
SYMBOL res 752 336 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 5k
SYMBOL res 640 544 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 5k
SYMBOL OpAmps\\UniversalOpAmp2 -416 80 R0
SYMATTR InstName U1
SYMBOL OpAmps\\UniversalOpAmp2 1232 256 R0
SYMATTR InstName U2
SYMBOL res 1168 336 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 5k
SYMBOL res 1312 336 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 5k
SYMBOL OpAmps\\UniversalOpAmp2 704 240 R0
SYMATTR InstName U3
SYMBOL res 768 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 5k
SYMBOL res 640 -80 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value 5k
SYMBOL cap 32 176 R0
SYMATTR InstName C2
SYMATTR Value 22n
SYMBOL OpAmps\\UniversalOpAmp2 -80 128 R0
SYMATTR InstName U4
SYMBOL res -240 448 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL res -240 592 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R13
SYMATTR Value 5k
SYMBOL nmos -784 64 R0
SYMATTR InstName M1
SYMBOL res -576 1104 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 5k
SYMBOL res -432 1104 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 5k
SYMBOL res -512 752 R90
WINDOW 0 0 56 Invisible 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value {R}
SYMBOL cap -480 784 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C3
SYMATTR Value {C}
SYMBOL OpAmps\\UniversalOpAmp2 -400 880 R0
SYMATTR InstName U5
SYMBOL cap 96 992 R0
SYMATTR InstName C4
SYMATTR Value 22n
SYMBOL OpAmps\\UniversalOpAmp2 -64 928 R0
SYMATTR InstName U6
SYMBOL res -224 1248 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL res -224 1392 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R17
SYMATTR Value 5k
SYMBOL nmos -768 864 R0
SYMATTR InstName M2
SYMBOL res 32 256 R0
SYMATTR InstName R18
SYMATTR Value 1k
SYMBOL res 96 1088 R0
SYMATTR InstName R19
SYMATTR Value 1k
SYMBOL diode 128 272 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL diode 208 1104 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMBOL res 768 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 5k
SYMBOL OpAmps\\UniversalOpAmp2 -1088 432 R0
SYMATTR InstName U7
SYMBOL res -1280 480 R0
SYMATTR InstName R21
SYMATTR Value 5k
SYMBOL res -1280 336 R0
SYMATTR InstName R22
SYMATTR Value 5k
TEXT -680 -168 Left 2 !.tran 1m uic
TEXT -192 -168 Left 2 !.param Vcc=12 fo=100k R=10k C=0.7*0.9/fo/R
